/* Oculta el cuerpo de la página por defecto para prevenir el FOUC */
body:not(.loaded) {
    visibility: hidden;
    opacity: 0;
}


html,
body {
    margin: 0;
    padding: 0;
    height: 100%;
    height: 100dvh;
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
    overflow-y: hidden;
}

.main,
.grid-wrapper {
    overflow-x: hidden;
}

/* Estilo para el elemento "fantasma" que sigue al cursor */
/* .sortable-ghost {
  opacity: 0.4;
  background-color: #c8ebfb;
  border: 1px dashed #4a90e2;
} */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    list-style: none;
    text-decoration: none;
    font-family: "Winky Rough", sans-serif;
    border-radius: 8px;
}

/* --- Transiciones de Tema --- */
/*
  Para que el cambio entre temas no sea brusco, aplicamos una transición
  a las propiedades que cambian de color. Esto hace que el cambio sea suave.
  Usamos una lista de selectores para afectar a los elementos principales.
*/
body,
.header,
.aside,
main,
.grid-wrapper,
.note-card-container,
#editor,
.perfil-options-dropdown,
.modal-delete-group-content,
.search-container,
input,
button,
.notes-group,
.aside__all-notes,
.aside__add-group__box,
.aside__trash-bin__box {
    transition: background-color 0.25s ease, color 0.25s ease, border-color 0.25s ease, outline-color 0.25s ease;
}

svg path,
svg circle {
    transition: fill 0.25s ease, stroke 0.25s ease;
}

:root {
    --color-verde: #4CAF50;
    --color-azul: #2196F3;
    --color-amarillo: #FFC107;
    --color-naranja: #FF5722;
    --color-rosa: #E91E63;
    --color-purpura: #9C27B0;
    --color-cian: #00BCD4;
    --color-indigo: #673AB7;
    --color-amarillo-brillante: #FFEB3B;
    --color-marron: #795548;
    --color-rojo: #F44336;
    --color-azul-oscuro: #3F51B5;

    /* Colores para el loader de sincronización */
    --loader-track-color: rgba(255, 255, 255, 0.3);
    --loader-spinner-color: #ffffff;

    /* --- Paleta de Colores Global (Tema Claro) --- */
    /* Header */
    --header-bg: #2196F3;
    --header-bg-hover: #0072d0;
    --header-text-color: #030303;

    /* Dropdown de Perfil */
    --dropdown-bg: whitesmoke;
    --dropdown-border-color: #c5c5c5;
    --dropdown-separator-color: #e0e0e0;
    --dropdown-text-primary: #333;
    --dropdown-text-secondary: #000000;
    --dropdown-item-hover-bg: #e9e9e9;
    --dropdown-logout-hover-bg: #ffebee;
    --dropdown-logout-hover-text: #c62828;

    /* Aside (Barra Lateral) */
    --aside-bg: #91cdff;
    --aside-border: #000000;
    --aside-item-bg: #5bb5ff;
    --aside-item-hover-bg: #4ba4ed;
    --aside-item-active-bg: #0083ed;
    --aside-text-primary: #000000;
    --aside-text-active: #ffffff;
    --aside-icon-primary: #000000;
    --aside-icon-active: #ffffff;
    --aside-trash-icon: #ff0000;
    --aside-action-hover-bg: #cce7ff;

    /* Search Input */
    --search-bg: whitesmoke;
    --search-placeholder-text: #555;
    --search-clear-icon-stroke: #000000;
    --search-icon-fill: #000000;

    /* Main Content & Notes */
    --main-bg: #0072d0;
    --main-area-bg: #008080;
    --note-bg-default: #f6f2ea;
    --note-border: #757575;
    --note-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
    --note-text-title: #1c1c1c;
    --note-text-body: #080808;
    --note-text-footer: #4d4d4d;
    --note-group-text: #4a4a4a;
    --note-selection-border: #007bff;
    --note-selection-shadow: 0 4px 12px rgba(0, 123, 255, 0.5);
    --note-selection-bg: #007bff;
    --note-selection-bg-hover: #0056b3;
    --note-options-bg: #e7f7ff;
    --note-options-border: #000000;
    --note-icon-color: #1C274C;
    /* Color para iconos en las tarjetas de nota */
    --note-options-hover-bg: #3eb2ff;

    /* Papelera */
    --trash-header-bg: #fdfdfd;
    --trash-deletion-text: #c02121;

    /* Editor de Notas */
    --editor-overlay-bg: rgba(0, 0, 0, 0.2);
    --editor-bg: #f6f2ea;
    --editor-outline: rgb(77, 77, 77);
    --editor-title-border: rgba(0, 0, 0, 0.416);
    --editor-placeholder-text: #999;
    --editor-info-bg: #bba5002d;
    --editor-group-color-border: #000000;
    --editor-group-name-text: #575757;
    --editor-text-primary: #000000;
    --editor-readonly-bg: #f5f5f5;
    --editor-readonly-outline: #ccc;
    --editor-readonly-banner-bg: #ffe082;
    --editor-readonly-banner-text: #333;
}

body.dark-mode {
    /* --- Paleta de Colores Global (Tema Oscuro) --- */
    --header-bg: #1a75bb;
    --header-bg-hover: #2a86ca;
    --header-text-color: #f7f7f7;

    --dropdown-bg: #333333;
    --dropdown-border-color: #555555;
    --dropdown-separator-color: #555;
    --dropdown-text-primary: #ecf0f1;
    --dropdown-text-secondary: #ecf0f1;
    --dropdown-item-hover-bg: #4a4a4a;
    --dropdown-logout-hover-bg: #442c2e;

    /* Aside (Barra Lateral) */
    --aside-bg: #2c3e50;
    --aside-border: #4a627a;
    --aside-item-bg: #34495e;
    --aside-item-hover-bg: #4a627a;
    --aside-item-active-bg: #3498db;
    --aside-text-primary: #ecf0f1;
    --aside-text-active: #ffffff;
    --aside-icon-primary: #ecf0f1;
    --aside-icon-active: #ffffff;
    --aside-trash-icon: #e74c3c;
    --aside-action-hover-bg: #34495e;

    /* Search Input */
    --search-bg: #4a627a;
    --search-placeholder-text: #bdc3c7;
    --search-clear-icon-stroke: #ecf0f1;
    --search-icon-fill: #ecf0f1;

    /* Main Content & Notes */
    --main-bg: #1e2b37;
    --main-area-bg: #162222;
    --note-bg-default: #2d3436;
    /* Un gris más oscuro y neutro para mejor contraste */
    --note-border: #5c7a99;
    --note-shadow: 3px 3px 6px rgba(0, 0, 0, 0.4);
    --note-text-title: #ffffff;
    --note-text-body: #bdc3c7;
    --note-text-footer: #95a5a6;
    --note-group-text: #bdc3c7;
    --note-selection-border: #3498db;
    --note-selection-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
    --note-selection-bg: #3498db;
    --note-selection-bg-hover: #2980b9;
    --note-options-bg: #4a627a;
    --note-options-border: #ecf0f1;
    --note-icon-color: #ecf0f1;
    /* Blanco para modo oscuro */
    --note-options-hover-bg: #5c7a99;

    /* Papelera */
    --trash-header-bg: #2c3e50;
    --trash-deletion-text: #e74c3c;

    /* Editor de Notas */
    --editor-overlay-bg: rgba(0, 0, 0, 0.5);
    --editor-bg: #2d3436;
    --editor-outline: #636e72;
    --editor-title-border: #636e72;
    --editor-placeholder-text: #b2bec3;
    --editor-info-bg: rgba(255, 234, 167, 0.2);
    --editor-group-color-border: #dfe6e9;
    --editor-group-name-text: #dfe6e9;
    --editor-text-primary: #ecf0f1;
    --editor-readonly-bg: #1e272e;
    --editor-readonly-outline: #485460;
    --editor-readonly-banner-bg: #fdcb6e;
    --editor-readonly-banner-text: #2d3436;
}

/* Elementos móviles ocultos por defecto en escritorio */
.mobile-fab,
.mobile-delete-zone {
    display: none;
}

/* Paleta de colores para las notas */
.color-1 {
    color: #4CAF50;
    /* Verde */
}

.color-2 {
    color: #2196F3;
    /* Azul */
}

.color-3 {
    color: #FFC107;
    /* Amarillo */
}

.color-4 {
    color: #FF5722;
    /* Naranja */
}

.color-5 {
    color: #E91E63;
    /* Rosa */
}

.color-6 {
    color: #9C27B0;
    /* Púrpura */
}

.color-7 {
    color: #00BCD4;
    /* Cian */
}

.color-8 {
    color: #673AB7;
    /* Índigo */
}

.color-9 {
    color: #FFEB3B;
    /* Amarillo brillante */
}

.color-10 {
    color: #795548;
    /* Marrón */
}

.color-11 {
    color: #F44336;
    /* Rojo */
}

.color-12 {
    color: #3F51B5;
    /* Azul oscuro */
}



body {
    display: grid;
    grid-template-columns: 250px 1fr;
    /* Ancho del aside y el resto del espacio */
    grid-template-rows: 60px 1fr;
    /* Alto del header y el resto del espacio */
    grid-template-areas:
        "header header"
        "aside  main";
    transition: grid-template-columns 200ms ease;
    /* Animamos el cambio de columnas */
}

body.aside-collapsed {
    grid-template-columns: 52px 1fr;
    /* Ancho del aside colapsado */
}

.pruebasFonts>* {
    font-size: 22px;
}

.fonts1 {
    /* font-family: "Saira", sans-serif; */
}

.fonts2 {
    font-family: "Saira", sans-serif;
}

.fonts3 {
    font-family: "Exo 2", sans-serif;
}

.fonts4 {
    font-family: "Comfortaa", sans-serif;
}

.fonts5 {
    font-family: "Winky Rough", sans-serif;
}

.fonts6 {
    font-family: "Varela Round", sans-serif;
}

.fonts7 {
    font-family: "Maven Pro", sans-serif;
}

.fonts8 {
    font-family: "Oswald", sans-serif;
}

.fonts9 {
    font-family: "PT Sans Narrow", sans-serif;
}

.fonts10 {
    font-family: "Barlow Condensed", sans-serif;
}



/* HEADER BARRA */

.header {
    grid-area: header;
    /* Ya no necesita ser position: fixed */
    /* position: fixed; */
    /* top: 0; */
    /* left: 0; */
    /* right: 0; */
    height: 60px;
    z-index: 1000;
    background: var(--header-bg);
    display: flex;
    flex-wrap: nowrap;
    justify-content: space-between;
    align-items: center;
    /* border-bottom: 2px solid black; */
    width: 100%;
    overflow: visible;
    padding-left: 10px;
    /* Espacio para el menú */
}

header * {
    user-select: none;
}

.logo-container {
    height: inherit;
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
    column-gap: 8px;
}

.logo {
    height: 100%;
}

.logo,
.perfil-img,
.dropdown-perfil-img {
    user-select: none;
    /* Evita que la imagen sea seleccionable */
    -webkit-user-drag: none;
    /* Específico para navegadores WebKit */
}

.logo-text {
    font-family: "Winky Rough", sans-serif;
    /* font-family: "Varela Round", sans-serif; */
    color: var(--header-text-color);
    font-size: 28px;
}






.header-toolbar {
    height: inherit;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 40px;
    /* border: 1px solid blue; */
}

.header-toolbar svg {
    height: 34px;
    aspect-ratio: 1;
    /* stroke-width: 2px; */
}

.header-toolbar svg path {
    stroke-width: 2px;
}

.header-toolbar svg path {
    stroke: var(--header-text-color);
}

.header-toolbar * {
    font-size: 14px;
}

.add-note {
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: nowrap;
    height: inherit;
    padding: 0px 8px;
}

.add-note:hover {
    background: var(--header-bg-hover);
}

.add-note svg path {
    stroke: var(--header-text-color);
}

.add-note-text {
    margin-left: 6px;
    color: var(--header-text-color);

    /* line-height: 1.1; */
    /* white-space: nowrap; */
}

.search-container {
    height: 70%;
    padding: 0px 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-wrap: nowrap;
    background: var(--search-bg);
}

.search-container>* {
    height: 30px;
}

.search-container svg {
    height: 28px;
}

.search-inpt {
    /* height: 100%; */
    background: inherit;
    border: none;
    /* border: 1px solid rgb(112, 112, 112); */
    /* box-shadow: inset 0 0 1px 1px  gray; */
    margin-left: 8px;
    color: var(--note-text-title);
}

.search-inpt:focus {
    border: none;
    outline: none;
}

.search-inpt::placeholder {
    color: var(--search-placeholder-text);
    padding: 0;
    margin: 0;
}

#clear-search-button {
    cursor: pointer;
    visibility: hidden;
    font-size: 30px;
    height: 24px;
}

#clear-search-button path {
    stroke: var(--search-clear-icon-stroke);
}

.search-icon-path {
    fill: var(--search-icon-fill);
}


.view-options-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
    color: var(--header-text-color);
}

.view-options-label {
    font-size: 12px;
    font-weight: 600;
    user-select: none;
}

.view-options-buttons {
    display: flex;
    gap: 4px;
    background-color: var(--search-bg);
    padding: 2px;
    border-radius: 6px;
}


.view-option-btn {
    background-color: transparent;
    border: none;
    padding: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: background-color 0.2s ease;
}


.view-option-btn svg {
    width: 18px;
    height: 18px;
}

.view-option-btn svg path {
    stroke: var(--header-text-color);
}

.view-option-btn:hover {
    background-color: var(--header-bg-hover);
}

.view-option-btn.active {
    background-color: var(--header-bg);
}

.view-option-btn.active:hover {
    background-color: var(--header-bg-hover);
}

.view-option-btn.active svg path {
    stroke: #ffffff;
}




.sort-options-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
    color: var(--header-text-color);
}

.sort-options-label {
    font-size: 12px;
    font-weight: 600;
    user-select: none;
}

.sort-options-button-wrapper {
    position: relative;
}

.sort-trigger-btn {
    background-color: var(--search-bg);
    border: none;
    padding: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    transition: background-color 0.2s ease;
}

.sort-trigger-btn:hover {
    background-color: var(--header-bg-hover);
}

.modal-explanation {
    font-size: 0.8rem;
    color: #666;
    margin-top: 15px;
    line-height: 1.4;
    text-align: left;
    padding: 10px;
    background-color: #f9f9f9;
    border-radius: 4px;
    border-left: 3px solid #ccc;
}

.dark-mode .modal-explanation {
    background-color: #3a4143;
    color: #ccc;
    border-left-color: #555;
}

.sort-trigger-btn svg {
    width: 18px;
    height: 18px;
}

.sort-trigger-btn svg path {
    stroke: var(--header-text-color);
}

.sort-options-dropdown {
    display: none;
    position: absolute;
    top: 110%;
    right: 0;
    background-color: var(--dropdown-bg);
    border: 1px solid var(--dropdown-border-color);
    border-radius: 6px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    z-index: 1001;
    padding: 4px;
    width: max-content;
    flex-direction: column;
    gap: 2px;
}

.sort-options-dropdown.active {
    display: flex;
}

.sort-option {
    background: none;
    border: none;
    color: var(--dropdown-text-primary);
    padding: 8px 12px;
    text-align: left;
    width: 100%;
    cursor: pointer;
    border-radius: 4px;
    font-size: 14px;
    white-space: nowrap;
    transition: background-color 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}

.sort-option:hover {
    background-color: var(--dropdown-item-hover-bg);
}

.sort-option.active {
    background-color: var(--header-bg);
    color: #ffffff;
}

.sort-option.active:hover {
    background-color: var(--header-bg-hover);
}

.modal-explanation {
    font-size: 0.8rem;
    color: #666;
    margin-top: 15px;
    line-height: 1.4;
    text-align: left;
    padding: 10px;
    background-color: #f9f9f9;
    border-radius: 4px;
    border-left: 3px solid #ccc;
}

.dark-mode .modal-explanation {
    background-color: #3a4143;
    color: #ccc;
    border-left-color: #555;
}

.sort-option svg {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
}

.sort-option svg path {
    stroke: var(--dropdown-text-primary);
}

.sort-option.active svg path {
    stroke: #ffffff;
}


.modal-explanation {
    font-size: 0.8rem;
    color: #666;
    margin-top: 15px;
    line-height: 1.4;
    text-align: left;
    padding: 10px;
    background-color: #f9f9f9;
    border-radius: 4px;
    border-left: 3px solid #ccc;
}

.dark-mode .modal-explanation {
    background-color: #3a4143;
    color: #ccc;
    border-left-color: #555;
}

#feedback-textarea {
    width: 100%;
    height: 150px;
    margin-top: 15px;
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
    resize: vertical;
    font-family: "Varela Round", sans-serif;
    font-size: 14px;
}

.dark-mode #feedback-textarea {
    background-color: #4a627a;
    color: #ecf0f1;
    border-color: #636e72;
}






.header-right-side {}

.header-right-side {
    height: 100%;
    display: flex;
    align-items: center;
    gap: 20px;
    margin-right: 26px;
}

.loader-container {
    display: flex;
    align-items: center;
    justify-content: center;
}

.loader {
    /* border: 4px solid rgba(255, 255, 255, 0.3); */
    /* border-top: 4px solid #ffffff; */
    border: 4px solid var(--loader-track-color);
    border-top-color: var(--loader-spinner-color);
    border-radius: 50%;
    width: 28px;
    height: 28px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}





.perfil-container {
    position: relative;
    height: inherit;
    display: flex;
    flex-wrap: nowrap;
    /* justify-content: end; */
    align-items: center;
    column-gap: 10px;
    /* margin-right: 26px; */

}

.perfil-nombre {
    font-size: 18px;
    cursor: pointer;
    color: var(--header-text-color);
}

.perfil-img {
    /* height: 90%; */
    height: 70%;
    border-radius: 50%;
    cursor: pointer;
    background: white;
    border: 2px solid white;
}

.perfil-options-dropdown {
    position: absolute;
    top: 60px;
    /* left: 56px; */
    /* left: 0; */
    right: 0;
    /* width: fit-content; */
    background: var(--dropdown-bg);
    border: 1px solid var(--dropdown-border-color);
    padding: 3px;
    z-index: 1000;
    pointer-events: none;
    user-select: none;
    display: flex;
    flex-direction: column;
    opacity: 0;
    clip-path: inset(0 0 100% 0);
    transition: 120ms;
}

.perfil-options-dropdown.active {
    pointer-events: unset;
    user-select: unset;
    opacity: 1;
    clip-path: inset(0 0 0 0);
}

/* --- Lógica de visibilidad de vistas de sesión --- */
/* Oculta el botón de Iniciar Sesión si hay una sesión activa */
.perfil-container.session-active .google-signin-btn {
    display: none;
}

/* Oculta el botón de Cerrar Sesión y su separador si NO hay sesión */
.perfil-container.no-session .logout-separator,
.perfil-container.no-session #logout-btn {
    display: none;
}

.google-signin-btn {
    background-color: #4CAF50;
    /* Verde */
    color: white;
    border: none;
    padding: 10px 16px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    margin: 8px 16px 16px 16px;
    border-radius: 4px;
    transition: background-color 0.2s;
    text-align: center;
}

.google-signin-btn:hover {
    background-color: #45a049;
}

.dropdown-profile-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px 16px;
    gap: 4px;
}

.dropdown-perfil-img {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #fff;
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);
}

.dropdown-perfil-nombre {
    font-size: 16px;
    font-weight: 600;
    color: var(--dropdown-text-primary);
    margin-top: 4px;
}

.perfil-option {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    color: var(--dropdown-text-secondary);
    padding: 8px 14px;
    /* Increased padding for better spacing */
    flex-grow: 1;
    text-wrap: nowrap;
    border-radius: 4px;
    /* Add some rounding */
    transition: background-color 0.2s;
}

.perfil-option:hover {
    background: var(--dropdown-item-hover-bg);
    /* A more neutral hover color */
}

.perfil-option--logout:hover {
    background-color: var(--dropdown-logout-hover-bg);
    /* Un rojo muy claro */
    color: var(--dropdown-logout-hover-text);
    /* Un rojo oscuro para el texto */
}

.perfil-option--logout:hover svg path {
    stroke: var(--dropdown-logout-hover-text);
    /* Cambia el color del borde del SVG */
}

.perfil-option svg path {
    stroke: var(--dropdown-text-secondary);
}

/* Lógica de visibilidad de los íconos del tema */
/* Por defecto (modo claro), se muestra la luna */
#theme-toggle-btn .icon-sun {
    display: none;
}

#theme-toggle-btn .icon-moon {
    display: block;
}

/* En modo oscuro, se muestra el sol */
body.dark-mode #theme-toggle-btn .icon-sun {
    display: block;
}

body.dark-mode #theme-toggle-btn .icon-moon {
    display: none;
}

.perfil-option svg {
    flex-shrink: 0;
    /* Prevent icons from shrinking */
}

.dropdown-separator {
    border: none;
    border-top: 1px solid var(--dropdown-separator-color);
    margin: 4px 8px;
}



/* ASIDE BARRA LATERAL IZQUIERDA */

.aside {
    grid-area: aside;
    /* Ya no necesita ser position: fixed */
    width: 100%;
    /* Ocupará el ancho de su celda en el grid */
    height: 100%;
    /* Ocupará el alto de su celda en el grid */
    padding: 4px 0;
    background: var(--aside-bg);
    border-right: 2px solid var(--aside-border);
    z-index: 1000;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* Oculta el contenido que se desborda al colapsar */
}

/* Ya no se usan estas clases */

.aside-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.aside__bottom-toolbar {
    display: flex;
    justify-content: space-around;
    padding: 6px 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}



#aside__menuham {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0px;
    margin-right: 10px;
    cursor: pointer;
}

#aside__menuham svg path {
    stroke: var(--aside-icon-primary);
}

#aside__menuham svg {
    cursor: pointer;
    height: 28px;
    width: 28px;
    transition: 280ms;
}

#aside__menuham svg:hover {
    /* transform: scale(1.1); */
    scale: 1.2;
}


.aside__all-notes {
    user-select: none;
    cursor: pointer;
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
    justify-content: end;
    padding: 10px 4px;
    transition: 100ms;
    background: var(--aside-item-bg);
}

body.aside-collapsed .aside__all-notes {
    justify-content: center;
}

body.aside-collapsed .aside__all-notes svg {
    margin-right: 0;
}

.aside__all-notes:hover {
    background: var(--aside-item-hover-bg);
}

.aside__all-notes svg {
    height: 26px;
    /* transform: scale(-1.4, 1); */
    margin-right: 4px;
}

.all-notes-text {
    /* font-size: 18px; */
    margin-right: 16px;
    color: var(--aside-text-primary);
    letter-spacing: 1px;
}



.notes-group__container {
    flex-grow: 1;
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: #007bff #f0f0f0;
    margin: 0;
}

.notes-group__container::-webkit-scrollbar {
    width: 10px;
    /* Grosor de la barra */
}

.notes-group__container::-webkit-scrollbar-track {
    background: #f0f0f0;
    /* Color del fondo de la barra */
}

.notes-group__container::-webkit-scrollbar-thumb {
    background: #007bff;
    /* Color del "pulgar" (parte que se mueve) */
    border-radius: 5px;
    /* Bordes redondeados */
}


.notes-group {
    position: relative;
    user-select: none;
    /* cursor: pointer; */
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
    justify-content: start;
    padding: 5px 0 5px 6px;
    gap: 4px;
    border-radius: 5px;
    transition: 80ms;
}

.notes-group:hover {
    background: var(--aside-item-hover-bg);
}

.aside .group-name,
.aside .add-group__text,
.aside .groupOptionsSVG,
.aside .group-color-selector,
.aside .all-notes-text {
    /* Transición suave para opacidad y tamaño */
    transition: opacity 150ms ease, width 150ms ease, margin 150ms ease, padding 150ms ease;
    white-space: nowrap;
    /* Evita que el texto se rompa en varias líneas durante la transición */
}

body.aside-collapsed .aside .group-name,
body.aside-collapsed .aside .add-group__text,
body.aside-collapsed .aside .groupOptionsSVG,
body.aside-collapsed .aside .group-color-selector,
body.aside-collapsed .aside .all-notes-text {
    /* Ocultamos visualmente y colapsamos el espacio que ocupan */
    opacity: 0;
    pointer-events: none;
    width: 0;
    margin: 0;
    padding: 0;
    overflow: hidden;
    /* Asegura que el contenido no se desborde durante la transición */
}




.notes-group.active,
.aside__all-notes.active,
.aside__trash-bin__box.active {
    background-color: var(--aside-item-active-bg);
    /* Un color de fondo más intenso para el activo */
    color: var(--aside-text-active);
}

.notes-group.active .group-name,
.aside__all-notes.active .all-notes-text,
.aside__trash-bin__box.active .trash-bin-text {
    color: var(--aside-text-active);
}


.notes-group.active .group-svg path,
.aside__trash-bin__box.active svg path,
.aside__all-notes.active svg path {
    stroke: var(--aside-icon-active);
}




.notes-group svg,
.notes-group svg path {
    cursor: pointer;
    aspect-ratio: 1;
    height: 22px;
    width: 22px;
    stroke: var(--aside-icon-primary);
    margin-right: 0;
    padding: 0;
    margin-left: 2px;
    transition: 180ms;
}

.notes-group>svg:hover {
    transform: scale(1.3);
}

.group-name {
    font-size: 18px;
    margin-left: 4px;
    margin-right: 0;
    font-weight: bold;
    flex-grow: 1;
    overflow: hidden;
    overflow-wrap: break-word;
    hyphens: auto;
    padding: 3px 6px;
    color: var(--aside-text-primary);

    /* En caso de que los de arriba no funcione puedo usar este word-wrap: break-word; */
    /* word-wrap: break-word; */
}

.group-color-selector {
    cursor: pointer;
    height: 30px;
    aspect-ratio: 1/1;
    /* object-fit: cover; */
    /* width: 30px; */
    border-radius: 50%;
    border: 1px dashed var(--aside-icon-primary);
    /* border: 2px solid whitesmoke; */
    background-color: rgb(246, 242, 234);
    padding: 0;
    transition: 120ms;
}

.group-color-selector:hover {
    transform: scale(1.2);
}


.group-color-indicator {
    border-radius: 0px;
    height: 70%;
    height: 30px;
    aspect-ratio: 1 / 1;
    width: 30px;
    padding: 0;
    margin-left: auto;
    clip-path: polygon(25% 0%, 100% 0%, 100% 100%, 25% 100%, 0% 50%);
    /* Estado inicial, será cambiado por JS */
    background-color: transparent;
    background-color: #f6f2ea;
    /* border: 2px solid #ffffff; */
    margin-left: 6px;
}

/* Parte de abajo del aside de grupos */
.aside__bottom {
    cursor: pointer;
    display: flex;
    align-items: end;
    justify-content: space-between;
}

.aside__bottom svg {
    height: 28px;
    width: 28px;
}


/* Papelera de reciclaje y añadir grupos */
.aside__trash-bin__box {
    cursor: pointer;
    color: red;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2px 8px;
    transition: background-color 150ms ease;
}

.aside__trash-bin__box:hover,
.aside__add-group__box:hover {
    background-color: var(--aside-action-hover-bg);
}

.aside__trash-bin-text {
    font-size: 12px;
    display: none;
}

/* .aside__trash-bin svg {
    height: 28px;
    width: 28px;
    margin: 0;
} */

.aside__trash-bin__box svg path {
    stroke: var(--aside-trash-icon);
    /* fill: red; */
}

.aside__trash-bin__box svg {
    height: 19px;
}


.aside__add-group__box {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px;
    color: var(--aside-text-primary);
}



/* Estilos para el menú desplegable de selección de color */

.color-palette-dropdown {
    display: none;
    /* position: absolute; */
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    padding: 5px;
    z-index: 1000;
    grid-template-columns: repeat(4, 1fr);
    cursor: pointer;
    transform: scale(0.8);
    /* transition: 180ms; */
    user-select: none;
    pointer-events: none;
}

.color-palette-dropdown.active {
    display: grid;
    user-select: unset;
    pointer-events: unset;
}

.color-option {
    width: 36px;
    height: 36px;
    border: 4px solid #ffffff;
    cursor: pointer;
    border-radius: 3px;
    transition: transform 0.2s;
}

.color-option:hover {
    transform: scale(1.1);
}



/* Asigna colores de fondo usando los atributos data-color */
/* 
.color-option[data-color="#FFC0CB"] { background-color: #FFC0CB; }
.color-option[data-color="#FF69B4"] { background-color: #FF69B4; }
.color-option[data-color="#FF0000"] { background-color: #FF0000; }
.color-option[data-color="#FFA500"]  { background-color: #FFA500; }
.color-option[data-color="#FFFF00"] { background-color: #FFFF00; }
.color-option[data-color="#ADFF2F"] { background-color: #ADFF2F; }
.color-option[data-color="#008000"] { background-color: #008000; }
.color-option[data-color="#00FFFF"] { background-color: #00FFFF; }
.color-option[data-color="#0000FF"] { background-color: #0000FF; }
.color-option[data-color="#8A2BE2"] { background-color: #8A2BE2; }
.color-option[data-color="#EE82EE"] { background-color: #EE82EE; }
.color-option[data-color="#800080"] { background-color: #800080; }
.color-option[data-color="#A52A2A"] { background-color: #A52A2A; }
.color-option[data-color="#808080"] { background-color: #808080; }
.color-option[data-color="#000000"] { background-color: #000000; }
.color-option[data-color="#FFFFFF"] { background-color: #FFFFFF; } */





/* OPCIONES DE GRUPO DROPDOWN */

.group-options-dropdown {
    display: none;
    flex-direction: column;
    position: absolute;
    /* top: calc(100% + 5px); */
    /* left: 0; */
    background-color: #fff;
    border: 4px solid #ffffff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    transform: scale(0.9);

    user-select: none;
    pointer-events: none;
}

.group-options-dropdown.active {
    display: flex;
    user-select: unset;
    pointer-events: unset;
}

.group-options-dropdown svg,
.group-option-dropdown svg path {
    cursor: pointer;
    aspect-ratio: 1;
    height: 22px;
    width: 22px;
    stroke: #000000;
    margin-right: 0;
    padding: 0;
    margin-left: 2px;
    transition: 180ms;
}

.group-option {
    cursor: pointer;
    user-select: none;
    border-radius: 3px;
    transition: transform 0.2s;
    display: flex;
    align-items: center;
    justify-content: start;
    padding: 6px 8px;
    column-gap: 8px;
}

.group-option:hover {
    background: #3eb2ff;
}







/* CAMBIAR GRUPO DROPDOWN */

.available-groups-dropdown {
    position: absolute;
    background-color: #f9f9f9;
    border: 2px solid #1a3864;
    box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
    padding: 2px 2px;
    min-width: 150px;
    max-height: 180px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    overflow-x: auto;
    z-index: 9999;
    pointer-events: none;
    user-select: none;
    opacity: 0;
    clip-path: inset(0 0 100% 0);
    transition: clip-path 120ms ease-out;

    scrollbar-width: thin;
    scrollbar-color: #2196f3 rgb(192, 192, 192);
}

/* ASEGURAR QUE EL PADRE SE POSICIONE POR ENCIMA DE TODO CUANDO EL DROPDOWN ESTÉ ACTIVO */
.note-card-container:has(.available-groups-dropdown.active),
#editor-group:has(.available-groups-dropdown.active) {
    z-index: 10001 !important;
}

.available-groups-dropdown.active {
    pointer-events: unset;
    user-select: unset;
    opacity: 1;
    clip-path: inset(0 0 0 0);
}

.available-groups {
    cursor: pointer;
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
    padding: 4px 16px 4px 6px;
}

.available-groups:hover {
    background-color: #49adff;
}

.available-group-color {
    width: 22px;
    aspect-ratio: 1/1;
    border: 1px solid rgb(0, 0, 0);
}

.available-group-name {
    /* border: 1px solid red; */
    margin-left: 4px;
    font-size: 14px;
}



/* MODAL DE CONFIRMACION AL ELIMINAR GRUPOS */

.modal-delete-group {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
    justify-content: center;
    align-items: center;
}

.modal-delete-group-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
    border-radius: 8px;
    position: relative;
    text-align: center;
}

.delete-group-close-button {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.delete-group-close-button:hover,
.delete-group-close-button:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}

.modal-delete-group-content>h2 {
    margin-bottom: 10px;
}

.modal-delete-group-content button {
    padding: 10px 20px;
    margin: 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.modal-delete-group-content .confirm-btn {
    background-color: #dc3545;
    color: white;
    transition: 180ms;
}

.modal-delete-group-content .confirm-btn:hover {
    transform: scale(1.1);
    background-color: rgb(255, 108, 108);
}

.modal-delete-group-content .cancel-btn {
    background-color: #6c757d;
    /* Gris para cancelar */
    color: white;
    transition: 180ms;
}

.modal-delete-group-content .cancel-btn:hover {
    transform: scale(1.1);
    background-color: rgb(196, 196, 196);
}







/* MAIN NOTAS */

main {
    grid-area: main;
    margin: 0;
    /* Eliminamos los márgenes antiguos */
    height: 100%;
    width: 100%;
    position: relative;
    overflow: hidden;
    /* El scroll lo manejará el grid-wrapper */
    background: var(--main-area-bg);
}


#no-notes-message {
    display: none;
    position: absolute;
    height: 100%;
    width: 100%;
    font-size: 20px;
    text-align: center;
    align-content: center;
    /* margin: auto; */
    /* border: 2px solid red; */
}

body.dark-mode #no-notes-message {
    /* Usamos la variable de color del título de la nota que en modo oscuro es blanco */
    color: var(--note-text-title);
}


/* envoltorio de muuri */
.grid-wrapper {
    overflow-y: auto;
    /* Este será el contenedor con scroll */
    overflow-x: hidden;
    box-sizing: border-box;
    padding: 20px;
    height: 100%;
    background: var(--main-bg);
}


/* Contenedor de muuri para notas fijadas*/
#pinned-notes-container {
    position: relative;
    /* background: #87CEEB; */
    width: 100%;
    /* min-height: 0px; */
    /* margin-bottom: 60px; */
    /* flex: 1 1 auto; */
}

/* Contenedor de muuri para notas no fijadas*/
#unpinned-notes-container {
    position: relative;
    /* Muuri necesita que sus contenedores tengan un posicionamiento no estático */
    /* background: #87CEEB; */
    /* min-width: 900px; */
    width: 100%;
    /* flex: 1 1 auto; */
}


/* Contenedor de muuri para la papelera */
#trash-notes-container {
    position: relative;
    /* Cambiado de absolute a relative para que respete el flujo del documento */
    width: 100%;
}




/* Para que muuri posicione el elemento arrastrado por encima siempre */
.muuri-item-dragging {
    z-index: 3;
}

.muuri-item-hidden {
    z-index: 0;
}

.muuri-item-releasing {
    z-index: 2;
}

.muuri-item-placeholder {
    z-index: 1;
}

/* --- FIX PARA DRAG & DROP LENTO --- */
/*
  Cuando Muuri arrastra un elemento, actualiza su posición usando 'transform'.
  Si el elemento tiene una transición CSS en 'transform', el navegador intentará
  animar suavemente cada pequeño movimiento, lo que resulta en un arrastre lento y "pesado".
  Al aplicar 'transition: none' a la clase '.muuri-item-dragging' que Muuri añade
  durante el arrastre, permitimos que JavaScript controle la posición instantáneamente,
  lo que resulta en un movimiento fluido.
*/
.muuri-item-dragging .note-card,
.muuri-item-dragging {
    transition: none !important;
}





/* Items de muuri */
.note-card-container {
    /* cursor: pointer; */
    position: absolute;
    width: 270px;
    height: 190px;
    /* padding: 4px 4px 10px 4px; */
    margin: 10px;
    background: var(--note-bg-default);
    border-radius: 6px;
    box-shadow: var(--note-shadow);
    border: 2px solid var(--note-border);
    display: flex;
    justify-content: space-between;
    flex-direction: column;
    box-sizing: border-box;
    /* transition: 200ms; */
    /* unicode-bidi: isolate; */
    transition: background-color 0.2s ease, opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
}

.note-card {
    width: inherit;
    height: inherit;
    padding: 4px 4px 10px 4px;
    display: flex;
    justify-content: space-between;
    flex-direction: column;
    box-sizing: border-box;
    transition: transform 200ms ease-in-out, background 200ms, opacity 200ms ease-in-out;
}

/* .note-card-container {
    position: absolute;
    width: 280px;
    height: 190px;
    padding: 6px 1px 8px 1px;
    background: #edbcff;
    border-radius: 6px;
    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
    border: 2px solid rgb(117, 117, 117);
    display: flex;
    justify-content: space-between;
    flex-direction: column;
    box-sizing: border-box;
    margin: 10px;
} */

.note-tools-container {
    position: relative;
    height: fit-content;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2px;
    padding: 0 6px;
    /* display: none; */
}


.note-multiple-selector {
    background: var(--note-bg-default);
    border: 2px solid var(--note-border);
    border: 3px solid rgba(29, 37, 255, 0.71);
    border-radius: 50%;
    height: 26px;
    width: 26px;
    aspect-ratio: 1/1;
    position: absolute;
    left: -15px;
    top: -18px;
    /* transition: transform 2000ms, color 2000ms; */
}

.note-multiple-selector:hover {
    border: 3px solid var(--note-selection-border);
    transform: scale(1.05);
}


/* ESTAS 2 CLASES SON PARA LAS OPCIONES QUE APARECEN AL HACER HOVER EN UNA NOTA CARD */
.note-hidden-options {
    opacity: 0;
    transition: opacity 180ms, transform 200ms, border 200ms;
}

.note-card-container:hover .note-hidden-options,
.note-card-container.is-selected .note-hidden-options {
    opacity: 1;
}




.note-tools-right-side {
    display: flex;
    justify-content: end;
    align-items: center;
    column-gap: 5px;
}

.note-tools-right-side * {
    cursor: pointer;
    height: 22px;
    aspect-ratio: 1/1;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 200ms;
}

.note-tools-right-side svg path {
    fill: var(--note-icon-color);
}


.note-tools-right-side>*:hover {
    transform: scale(1.26);
}

.note-group {
    display: flex;
    align-items: center;
    justify-content: start;
    /* width: fit-content; */
    gap: 5px;
    margin-left: 16px;
}

.note-group-color {
    cursor: pointer;
    height: 20px;
    aspect-ratio: 1/1;
    border-radius: 50%;
    border: 2px solid black;
    background-color: #f6f2ea;
    padding: 0;
    transition: 120ms;
}

.note-group-color:hover {
    transform: scale(1.2);
}

.note-group-color.disabled {
    cursor: not-allowed;
    opacity: 0.6;
}

.note-group-color.disabled:hover {
    transform: none;
}

.note-group-name {
    cursor: default;
    font-size: 12px;
    color: var(--note-group-text);
    width: fit-content;
}

.note-pin {}

.note-pin>* {
    height: 23px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.note-pinned {}

.note-unpinned {
    /* opacity: 0; */
    /* transition: opacity 200ms ease-in-out; */
}

.note-options-btn {
    /* opacity: 0; */
    cursor: pointer;
    fill: #000000;
    color: #000000;
}


/* OPCIONES DE NOTA CARD DROPDOWN */

.note-options-dropdown {
    position: absolute;
    right: 4%;
    top: 14%;

    display: flex;
    width: 160px;
    padding: 3px;
    flex-direction: column;
    /* background-color: var(--note-options-bg); */
    background-color: whitesmoke;
    /* outline: 2px solid var(--note-options-border); */
    outline: 2px solid rgb(15, 15, 15);
    box-shadow: var(--note-shadow);
    z-index: 1000;
    transform: scale(0.9);
    overflow: hidden;
    user-select: none;
    pointer-events: none;
    opacity: 0;
    visibility: hidden;
    /* transition: */
    /* opacity 300ms ease-out, */
    /* clip-path 400ms ease-in-out; */
    font-size: 12px;
}

.note-options-dropdown.active-options-dropdown {
    user-select: unset;
    pointer-events: unset;
    opacity: 1;
    visibility: visible;
    /* animation: noteOptions 100ms ease-in-out; */
}

/* Clase para la transición de cambio de vista */
.grid-wrapper.view-changing .note-card-container {
    opacity: 0;
    transform: scale(0.95);
}

/* ESTILOS PARA LA VISTA DE LISTA */
/* Cuando la vista de lista está activa, hacemos que los contenedores de Muuri no superen un ancho máximo y se centren. */
.grid-wrapper.list-view-active .grid-pinned,
.grid-wrapper.list-view-active .grid-unpinned {
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
}

/* Luego, hacemos que las tarjetas dentro de esos contenedores ocupen todo el ancho disponible. */
.grid-wrapper.list-view-active .note-card-container {
    width: 100%;
    height: auto;
    margin: 8px 0;
    /* Reducimos el margen para que se vean más juntas. */
}

.grid-wrapper.list-view-active .note-card {
    padding: 12px 16px;
}

.grid-wrapper.list-view-active .note-title {
    /* Permitimos que el título ocupe más de una línea si es necesario. */
    max-height: none;
}

.grid-wrapper.list-view-active .note-body {
    --max-lines: 10;
    /* Permitir muchas más líneas para el cuerpo */
    height: auto;
    /* La altura se ajusta al contenido */
    max-height: 250px;
    /* Un límite para que no se haga gigante */
}

/* ESTILOS PARA LA VISTA MASONRY */
.grid-wrapper.masonry-view-active .note-card-container {
    /* En masonry, la altura es automática para que cada tarjeta se ajuste a su contenido */
    height: auto;
    /* max-height: 480px; */
    /* overflow: hidden; */
}

.grid-wrapper.masonry-view-active .note-card {
    /* El padding puede ser el mismo que en la vista de cuadrícula */
    padding: 4px 4px 10px 4px;
}

.grid-wrapper.masonry-view-active .note-title {
    /* Permitimos que el título se expanda si es necesario */
    /* max-height: none; */
}

.grid-wrapper.masonry-view-active .note-body {
    /* La altura del cuerpo también debe ser automática */
    height: auto;
    max-height: 420px;
    overflow: hidden;
}

.grid-wrapper.masonry-view-active .note-footer {
    /* height: 20px; */
}



.note-options-dropdown svg,
.note-options-dropdown svg path {
    cursor: pointer;
    aspect-ratio: 1;
    height: 26px;
    width: 26px;
    stroke: #000000;
    /* stroke: #e41010; */
    margin-right: 0;
    padding: 0;
    margin-left: 2px;
    transition: 180ms;
}

.note-options-dropdown span {
    /* line-height: 1; */
    display: flex;
    flex-wrap: nowrap;
    /* border: 1px solid red; */
    padding: 0;
    /* color: #e41010; */
}


.note-option {
    cursor: pointer;
    user-select: none;
    /* border-radius: 3px; */
    transition: transform 200ms;
    display: flex;
    align-items: center;
    justify-content: start;
    padding: 2px 3px;
    column-gap: 8px;
}

.note-option:hover {
    /* background: var(--note-options-hover-bg); */
    background: #47afff;
}



.note-text {
    overflow: hidden;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    padding: 8px 16px;
    /* gap: 4px; */
}

.note-title {
    border-radius: 0;
    /* margin-bottom: 4px; */
    /* padding: 0 6px; */
    color: var(--note-text-title);
    outline: none;
    overflow: hidden;
    font-size: 17px;
    font-weight: 600;
    line-height: 0.9;
    overflow: hidden;
    overflow-wrap: break-word;
    letter-spacing: 0.2px;
    word-spacing: 3px;
    /* word-break: break-all; */
    text-overflow: ellipsis;
    min-height: 0px;
    max-height: 31px;
    display: flex;
    flex: 0 0 auto;
    /* border: 1px solid red; */
    margin-bottom: 10px;

    /* --max-lines: 2;
    --line-height: 0.9;
      height: calc(var(--max-lines) * 1em * var(--line-height));
      line-height: var(--line-height); */
}

.note-title:empty {
    display: none;
}

.note-body {
    border-radius: 0;
    /* padding: 2px 6px; */
    /* margin: 4px 0; */
    color: var(--note-text-body);
    outline: none;
    /* display: flex; */
    /* flex-direction: column; */
    /* height: 120px; */
    /* max-height: 208px; */
    /* flex: 1 0; */
    overflow: hidden;
    font-size: 14px;
    font-weight: 400;
    overflow-wrap: break-word;
    /* word-break: break-all; */
    text-overflow: ellipsis;
    /* border: 1px solid red; */

    /* display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 5; */

    --max-lines: 4;
    --line-height: 1.3;
    height: calc(var(--max-lines) * 1em * var(--line-height));
    line-height: var(--line-height);
}

.note-body::-webkit-scrollbar {
    /* display: none;. */
}

.note-footer {
    /* position: absolute; */
    /* flex: 1; */
    /* bottom: 6px; */
    /* left: 50%; */
    /* transform: translateX(-50%); */
    /* background: #4b1a5220; */
    /* flex: 0 0 28px; */
    height: 16px;
    display: flex;
    /* flex: 0 0 auto; */
    align-items: center;
    justify-content: start;
    /* padding: 1px 10px; */
    padding: 1px 10px;
    column-gap: 6px;
    user-select: none;
    /* overflow: hidden; */
    /* display: none; */
}

.note-footer * {
    font-size: 10px;
    font-family: "Oswald", sans-serif;
    font-family: "PT Sans Narrow", sans-serif;
    /* font-family: "Barlow Condensed", sans-serif; */
    font-weight: 600;
    letter-spacing: .6px;
    padding: 0;
    margin: 0;
    white-space: nowrap;
    /* overflow: hidden; */
}

.note-last-modified {
    padding: 2px 8px;
    /* background: #4b1a5220; */
    color: var(--note-text-footer);
}

.note-length {}

.note-date-creation {}





/* PARA QUE AL APARECER LA NUEVA NOTA TENGA UNA ANIMACION. */
/* @keyframes fadeInOut {
    0% {
        opacity: 0;
        transform: scale(1);
    }
    1% {
        opacity: 0;
        transform: scale(0.8);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
} */

/* .note-fade {
    animation: fadeInOut 200ms ease-in-out;
} */






/* Clase para la animación de eliminacion */
/* IMPORTANTE: Si usas transition entonces debes cambiar en javascrip en la funcion eliminar el listener por transitionend, y si es animacion animatioend */
.nota-eliminando {
    /* opacity: 0; */
    /* transform: scale(0.8); */
    /* transition: opacity 0.5s ease-out, transform 0.5s ease-out; */
    animation: deleteNote 400ms ease-in-out forwards;
}

@keyframes deleteNote {
    0% {
        /* opacity: 1; */
        clip-path: inset(0 0 0 0);
        /* width: 240px; */
        /* transform: scale(1); */
    }

    50% {
        clip-path: inset(0 100% 0 0);
        width: 240px;
    }

    100% {
        /* opacity: 1; */
        clip-path: inset(0 100% 0 0);
        width: 0;
        /* transform: scale(1); */

    }
}



/* AQUI COMIENZAN LOS ESTILOS DEL EDITOR DE NOTAS */
/* AQUI COMIENZAN LOS ESTILOS DEL EDITOR DE NOTAS */
/* AQUI COMIENZAN LOS ESTILOS DEL EDITOR DE NOTAS */
.modal-editor {
    position: absolute;
    /* top: 60px;
    left: 250px;
    right: 0;
    bottom: 0; */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    background: var(--editor-overlay-bg);
    box-shadow: inset 0 0 20px 00px rgba(0, 0, 0, 0.386);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 900;

    visibility: hidden;
    opacity: 0;
    transition: opacity 160ms;

}

.modal-editor.active {
    visibility: visible;
    opacity: 1;
}

#editor {
    height: 94%;
    width: 70%;
    background-color: var(--editor-bg);
    outline: 3px solid var(--editor-outline);
    padding: 12px 32px 4px 32px;
    display: flex;
    flex-wrap: nowrap;
    flex-direction: column;
    overflow: hidden;
    visibility: inherit;
    transform: translateY(-20px);
    transition: 200ms;
}

#editor.active {
    visibility: visible;
    transform: translateY(0px);
}

.editor-toolbar {
    display: flex;
    /* flex-direction: column; */
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.editor-tools-right {
    display: flex;
    flex-wrap: nowrap;
    justify-content: end;
    align-items: center;
    column-gap: 28px;
    color: var(--editor-text-primary);
}

.editor-tools {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    align-items: center;
    column-gap: 6px;
}

.editor-tools .group-color-selector {
    height: 30px;
    aspect-ratio: 1/1;
}

.editor-tools svg {
    height: 30px;
    aspect-ratio: 1/1;
    /* object-fit: cover; */
    transition: 180ms;
    /* transition: 180ms; */
    cursor: pointer;
}

.editor-tools-right svg path {
    stroke: currentColor;
    fill: currentColor;
}

.editor-tools svg:hover {
    transform: scale(1.3);
}

#editor-group-color {
    cursor: pointer;
    position: relative;
    height: 30px;
    aspect-ratio: 1/1;
    border-radius: 50%;
    border: 2px solid var(--editor-group-color-border);
    background-color: var(--editor-bg);

    padding: 0;
    transition: 120ms;
}

#editor-group-color:hover {
    transform: scale(1.2);
}

#editor-group-name {
    font-size: 14px;
    font-weight: 600;
    text-align: center;
    color: var(--editor-group-name-text);
    pointer-events: none;
}

#editor-pinned {
    display: none;
}

#editor-unpinned {
    display: none;
}

#editor-pinned.active {
    display: block;
}

#editor-unpinned.active {
    display: block;
}

#editor-save-btn {
    padding: 4px 14px;
    font-size: 0.8em;
    /* font-weight: 600; */
    cursor: pointer;
    /* background-color: transparent; */
    /* border: 1px solid; */
}



#editor-note {
    /* position: relative; */
    display: flex;
    flex-direction: column;
    /* width: 96%; */
    flex: 1 0 auto;
    /* border: 1px solid red; */
}

.editor-title {
    position: relative;
    cursor: text;
    border-radius: 0;
    border-bottom: 1px solid var(--editor-title-border);
    display: inline-block;
    min-height: 30px;
    /* max-height: 100px; */
    margin: 0px 38px;
    margin: 0px;
    /* padding: 4px 12px; */
    padding: 3px 5px;
    /* padding-bottom: 6px; */
    font-size: 1.4em;
    font-weight: 600;
    word-break: break-all;
    line-height: 1em;
    letter-spacing: 0.2px;
    overflow-x: hidden;
    overflow-y: hidden;
    z-index: 1000;
    /* border: 1px solid red; */

    white-space: pre-wrap;
    /* Preserva espacios, tabulaciones y saltos de línea */
    /* font-family: monospace; */
    color: var(--editor-text-primary);
    /* Opcional: para que las tabulaciones se vean uniformes */
}

.editor-title:focus {
    outline: none;
    /* background: #f3d8a5; */
}

.editor-title::before {
    content: "Escribe el título de la nota...";
    color: var(--editor-placeholder-text);
    position: absolute;
    top: 4px;
    left: 9px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 100ms;
    /* background: #000; */
}

.editor-title.active::before {
    opacity: 1;
}

.editor-body {
    position: relative;
    cursor: text;
    /* padding: 4px 18px; */
    padding: 5px;
    margin: 8px 0 4px 0;
    display: inline-block;
    flex: 1 0 0;
    min-height: 40px;
    /* border: 1px solid red; */
    font-size: 1.1em;
    /* letter-spacing: 0px; */
    /* text-wrap: wrap; */
    word-wrap: break-all;
    overflow-wrap: break-word;
    /* hyphens: auto; */
    overflow-x: hidden;
    overflow-y: auto;
    z-index: 1000;
    scrollbar-width: thin;
    scrollbar-color: #5151ff #f3f3f3;

    white-space: pre-wrap;
    /* Preserva espacios, tabulaciones y saltos de línea */
    /* Opcional: para que las tabulaciones se vean uniformes */
    /* font-family: monospace;  */

    color: var(--editor-text-primary);
    /* scroll-behavior: smooth; */
}

.editor-body:focus {
    outline: none;
    /* background: #f3d8a5; */
}

.editor-body::before {
    content: "Escribe algo...";
    font-size: 14px;
    font-weight: 600;
    color: var(--editor-placeholder-text);
    position: absolute;
    top: 9px;
    left: 9px;
    pointer-events: none;
    opacity: 0;
    transition: opacity 100ms;
    /* background: #000; */
}

.editor-body.active::before {
    opacity: 1;
}

.editor-footer {
    display: flex;
    flex-wrap: nowrap;
    justify-content: start;
    align-items: center;
    /* border: 1px solid red; */
    padding: 2px 10px;
    margin-top: 6px;
    column-gap: 6px;
    color: var(--editor-text-primary);
    /* font-family: "Oswald", sans-serif; */
    /* font-family: "PT Sans Narrow", sans-serif; */
    /* font-family: "Barlow Condensed", sans-serif; */
}

.editor-footer>* {
    font-weight: 600;
    /* font-family: "Oswald", sans-serif; */
    /* font-family: "PT Sans Narrow", sans-serif; */
    /* font-family: "Barlow Condensed", sans-serif; */
    /* font-family: "Exo 2", sans-serif; */
    /* font-family: "Saira", sans-serif; */
    /* font-family: "Comfortaa", sans-serif; */
    /* font-family: "Winky Rough", sans-serif; */
    font-family: "Varela Round", sans-serif;
    /* font-family: "Maven Pro", sans-serif; */
    /* font-family: "Oswald", sans-serif; */
    /* font-family: "PT Sans Narrow", sans-serif; */
    /* font-family: "Barlow Condensed", sans-serif; */
}

.editor-info {
    font-size: 12px;
    font-weight: 200;
    padding: 2px 20px;
    background: var(--editor-info-bg);
    display: flex;
    justify-content: start;
    user-select: none;
}



/* ESTILOS PARA LA SELECCIÓN MÚLTIPLE DE NOTAS */

/* Estilo para el círculo selector cuando la nota está seleccionada */
.note-multiple-selector.is-selected-selector {
    background-color: var(--note-selection-bg);
    border-color: var(--note-selection-bg-hover);
}

/* Ocultar herramientas de la nota y mostrar selector en modo selección */
body.selection-mode-active .note-card-container .note-tools-container {
    opacity: 0;
    pointer-events: none;
}

body.selection-mode-active .note-card-container .note-multiple-selector {
    opacity: 1;
    pointer-events: all;
}

/* Estilos para las notas NO seleccionadas en modo selección */
body.selection-mode-active .note-card-container:not(.is-selected) {
    transform: scale(0.95);
    opacity: 0.6;
    border-color: transparent;
}

/* Estilos para las notas SELECCIONADAS en modo selección */
body.selection-mode-active .note-card-container.is-selected {
    transform: scale(1);
    opacity: 1;
    border: 3px solid var(--note-selection-border);
    box-shadow: var(--note-selection-shadow);
}


/* Icono de checkmark para el selector (usando un pseudo-elemento) */
.note-multiple-selector.is-selected-selector::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 7px;
    width: 4px;
    height: 10px;
    border: solid white;
    border-width: 0 3px 3px 0;
    transform: rotate(45deg);
}




/* Barra de herramientas para acciones de selección múltiple */
#selection-toolbar {
    position: fixed;
    /* bottom: -100px; */
    top: -140px;
    /* Oculto por defecto */
    left: 50%;
    transform: translateX(-50%);
    /* width: fit-content; */
    width: 100%;
    height: 60px;
    padding: 10px 20px;
    background-color: #333;
    color: white;
    /* border-radius: 8px 8px 0 0; */
    border-radius: 0;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    z-index: 1100;
    transition: top 0.3s ease-in-out;
}

#selection-toolbar.visible {
    top: 0;
    /* Visible */
}

#selection-count {
    font-size: 16px;
    font-weight: bold;
}

#selection-toolbar-buttons {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 14px;
}

#selection-toolbar button {
    padding: 8px 46px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 3px;
}

#selection-toolbar svg {
    height: 20px;
}

#delete-selected-btn {
    background-color: #dc3545;
    color: white;
    stroke: white;
    fill: white;

}

#delete-selected-btn path {
    /* background-color: #dc3545; */
    color: white;
    stroke: white;
    fill: white;
}

#duplicate-selected-btn {
    background-color: #17a2b8;
    /* Un color cian para duplicar */
    color: white;
}

#duplicate-selected-btn path {
    color: white;
    stroke: white;
    fill: white;
}

#duplicate-selected-btn:hover {
    background-color: #138496;
}

#delete-selected-btn:hover {
    background-color: #c82333;
}

#cancel-selection-btn {
    background-color: #6c757d;
    color: white;
}

#cancel-selection-btn:hover {
    background-color: #5a6268;
}

.selection-toolbar-span {
    font-size: 12px;
}



/* --- ESTILOS PARA NOTIFICACIONES (TOASTS) --- */
#notification-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 2000;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: flex-end;
}

.notification {
    padding: 12px 20px;
    border-radius: 6px;
    color: white;
    font-size: 14px;
    font-weight: bold;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    opacity: 0;
    transform: translateX(110%);
    /* Inicia fuera de la pantalla */
    transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.215, 0.610, 0.355, 1);
    min-width: 250px;
    max-width: 400px;
}

.notification.visible {
    opacity: 1;
    transform: translateX(0);
}

.notification--error {
    background-color: #e74c3c;
}

.notification--success {
    background-color: #2ecc71;
}

.notification--info {
    background-color: #3498db;
}

.notification--warning {
    background-color: #f39c12;
}




/* ESTILOS PARA LA VISTA DE PAPELERA */

.trash-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
    gap: 20px;
    padding: 10px;
}

.note-card-container.is-trashed {
    position: relative;
    /* Para que el grid lo posicione */
    opacity: 0.8;
    border-style: dashed;
}

.note-card-container.is-trashed:hover {
    opacity: 1;
}

.note-trash-actions {
    display: flex;
    gap: 8px;
}

.note-trash-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 2px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s;
}

.note-trash-btn:hover {
    background-color: rgba(0, 0, 0, 0.1);
}

.note-trash-btn svg {
    width: 22px;
    height: 22px;
}

.note-deletion-info {
    font-size: 8px;
    font-family: "Varela Round", sans-serif;
    color: var(--trash-deletion-text);
    font-weight: bold;
    margin-left: auto;
    /* Empuja el elemento hacia la derecha */
    padding: 2px 2px;
    align-self: center;
    /* Centra verticalmente en el footer */
}


/* ESTILOS PARA LA CABECERA DE LA PAPELERA */

.trash-grid {
    /* Usamos CSS Grid para organizar las notas en la papelera */
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
    gap: 20px;
    padding: 10px;
}

.trash-header {
    padding: 10px 20px;
    text-align: right;
    border-bottom: 1px solid var(--dropdown-separator-color);
    background-color: var(--trash-header-bg);
    margin-bottom: 10px;
}

.empty-trash-button {
    padding: 8px 16px;
    background-color: var(--color-rojo);
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s;
}

.empty-trash-button:hover {
    background-color: #c82333;
}

.empty-trash-button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}


/* ESTILOS PARA EL EDITOR EN MODO SOLO LECTURA */
#editor.read-only {
    background-color: var(--editor-readonly-bg);
    /* Un gris neutro para indicar inactividad */
    outline-color: var(--editor-readonly-outline);
}

#editor.read-only::before {
    content: 'Nota en la papelera (Solo lectura)';
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--editor-readonly-banner-bg);
    /* Un amarillo suave */
    color: var(--editor-readonly-banner-text);
    padding: 5px 15px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: bold;
    z-index: 1001;
}

#editor.read-only .editor-title,
#editor.read-only .editor-body {
    cursor: default;
}







@media screen and (max-width: 768px) {

    body,
    body.aside-collapsed {
        grid-template-columns: 1fr;
        grid-template-rows: 60px 1fr;
        grid-template-areas:
            "header"
            "main";
    }

    /* Backdrop del aside */
    .aside-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(8px);
        z-index: 1999;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.4s ease;
    }

    body:not(.aside-collapsed) .aside-backdrop {
        opacity: 1;
        pointer-events: auto;
    }

    /* El aside se convierte en un menú lateral deslizable */
    .aside {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 300px;
        max-width: 85vw;
        z-index: 2000;
        transform: translateX(-100%);
        transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        background: var(--aside-bg);
        border-right: none;
        padding: 0;
        box-shadow: none;
        display: flex;
        flex-direction: column;
    }

    .aside-container {
        padding: 20px 15px;
        height: 100%;
        display: flex;
        flex-direction: column;
    }

    body:not(.aside-collapsed) .aside {
        transform: translateX(0);
        box-shadow: 10px 0 30px rgba(0, 0, 0, 0.2);
    }

    .main {
        grid-area: main;
        width: 100%;
        background: var(--main-bg);
    }

    .grid-wrapper {
        padding: 12px 8px;
    }

    /* Ocultar el botón de añadir nota original en el header móvil */
    #add-note-btn {
        display: none;
    }

    /* Botón de acción flotante (FAB) */
    .mobile-fab {
        position: fixed;
        bottom: 25px;
        right: 25px;
        width: 65px;
        height: 65px;
        border-radius: 20px;
        background: var(--color-2);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        box-shadow: 0 8px 25px rgba(33, 150, 243, 0.4);
        z-index: 999;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .mobile-fab:active {
        transform: scale(0.9) rotate(5deg);
    }

    .mobile-fab svg {
        width: 32px;
        height: 32px;
    }

    /* Zona de eliminación para móvil */
    .mobile-delete-zone {
        position: fixed;
        bottom: 25px;
        left: 25px;
        width: 65px;
        height: 65px;
        border-radius: 20px;
        background: rgba(244, 67, 54, 0.08);
        border: 2px dashed rgba(244, 67, 54, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #f44336;
        z-index: 998;
        opacity: 0;
        transform: scale(0.5);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        pointer-events: none;
    }

    .mobile-delete-zone.active {
        opacity: 1;
        transform: scale(1);
    }

    .mobile-delete-zone.hover {
        background: #f44336;
        color: white;
        transform: scale(1.1);
        box-shadow: 0 4px 20px rgba(244, 67, 54, 0.4);
        border-style: solid;
    }

    /* Header adjustments */
    .header {
        padding: 0 8px;
        height: 56px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        width: 100%;
    }

    .logo {
        height: 34px !important;
    }

    #aside__menuham {
        margin-right: 2px;
    }

    #aside__menuham svg {
        height: 24px;
        width: 24px;
    }

    .logo-text,
    .perfil-arrow,
    .add-note-text,
    .view-options-label,
    .sort-options-label {
        display: none;
    }

    .header-toolbar {
        gap: 4px;
        flex: 1;
        min-width: 0;
        justify-content: space-evenly;
        padding: 0 4px;
        overflow: visible;
    }

    .header-toolbar svg {
        height: 22px;
        flex-shrink: 0;
    }

    .search-container {
        flex: 1;
        max-width: 100px;
        min-width: 40px;
        height: 36px;
        border-radius: 10px;
        padding: 0 6px;
        display: flex;
        align-items: center;
        gap: 4px;
    }

    .search-inpt {
        font-size: 15px;
        margin-left: 0;
        flex: 1;
        min-width: 0;
        width: auto;
    }

    .perfil-nombre {
        display: none;
    }

    .header-right-side {
        margin-right: 0;
        gap: 6px;
        flex-shrink: 0;
    }

    .perfil-img {
        height: 32px;
        width: 32px;
        flex-shrink: 0;
    }

    .view-option-btn {
        padding: 4px;
    }

    .sort-trigger-btn {
        padding: 6px;
    }

    /* Notas */
    .note-card-container {
        width: calc(100% - 20px);
        height: auto;
        min-height: 160px;
        margin: 10px;
    }

    .note-card {
        padding: 20px;
        border-radius: 20px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        height: 100%;
    }

    .note-title {
        font-size: 19px;
        margin-bottom: 12px;
        max-height: none;
        word-break: break-word;
        overflow-wrap: break-word;
    }

    .note-body {
        font-size: 15px;
        line-height: 1.5;
        height: auto;
        --max-lines: 8;
        max-height: calc(var(--max-lines) * 1.5em);
        word-break: break-word;
        overflow-wrap: break-word;
    }

    @media (min-width: 480px) {
        .note-card-container {
            width: calc(50% - 16px);
            margin: 8px;
        }
    }

    /* Editor Modal */
    #editor {
        width: 100%;
        height: 100%;
        padding: 24px;
        border-radius: 0;
        outline: none;
    }

    .editor-toolbar {
        margin-bottom: 25px;
    }

    .editor-title {
        font-size: 1.6em;
        margin-bottom: 12px;
        padding: 5px 0;
    }

    .editor-body {
        font-size: 18px;
        line-height: 1.6;
    }

    .editor-footer {
        margin-top: auto;
        padding: 20px 0;
        border-top: 1px solid rgba(0, 0, 0, 0.08);
    }

    /* Barra de selección */
    #selection-toolbar {
        flex-direction: column;
        height: auto;
        padding: 15px;
        top: -500px;
        left: 0;
        transform: none;
        width: 100%;
        border-radius: 0 0 20px 20px;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.15);
    }

    #selection-toolbar.active {
        top: 0;
    }

    #selection-toolbar-buttons {
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        margin-top: 10px;
    }

    .selection-toolbar-span {
        display: none;
    }
}